import{l as L,m as N}from"./chunk-MWBKWIFM.js";import{a as P}from"./chunk-XXFZ6NT5.js";import{d as A}from"./chunk-IAGVYY6L.js";import{a as F}from"./chunk-Q6ESINKT.js";import{j as O,k as T,l as w,m as V,n as M,o as k}from"./chunk-GOJ2ZNOE.js";import{Aa as o,Ab as b,Gb as S,La as I,Nb as v,Ob as h,Pb as D,Qa as p,Qb as R,Rb as f,W as _,bb as d,cb as i,db as n,eb as E,f as y,ib as u,jb as g,ob as c,tb as x,ya as C,yb as a,zb as m}from"./chunk-QQS62GLD.js";function U(e,r){if(e&1&&(i(0,"span",12),a(1),n()),e&2){let t=c();o(),b("(",t.meta.label,")")}}function j(e,r){e&1&&(i(0,"div",4),a(1,"Carregando\u2026"),n())}function H(e,r){if(e&1&&(i(0,"div",13),a(1),n()),e&2){let t=c();o(),m(t.error)}}function $(e,r){e&1&&(i(0,"div",14),a(1,"Conex\xE3o lenta. Exibindo o que j\xE1 foi carregado\u2026"),n())}function q(e,r){if(e&1&&(u(0),E(1,"p-chart",24),g()),e&2){let t=c(2);o(),d("data",t.yearChart)("options",t.yearOpts)}}function z(e,r){e&1&&(i(0,"div",25),a(1,"Sem s\xE9rie por ano."),n())}function Z(e,r){if(e&1&&(u(0),E(1,"p-chart",24),g()),e&2){let t=c(2);o(),d("data",t.dayChart)("options",t.dayOpts)}}function G(e,r){e&1&&(i(0,"div",25),a(1,"Sem s\xE9rie por dia."),n())}function J(e,r){if(e&1&&(i(0,"a",36),a(1,"Abrir v\xEDdeo"),n()),e&2){let t=c().$implicit;d("href",t.link||t.url,C)}}function K(e,r){if(e&1&&(i(0,"article",28)(1,"div",29),a(2),v(3,"date"),n(),i(4,"div",30),a(5),n(),i(6,"div",31),a(7),n(),i(8,"div",32)(9,"span",33),a(10),n()(),i(11,"div",34),p(12,J,2,1,"a",35),n()()),e&2){let t=r.$implicit;o(2),m(t.data_postagem||(t.parsedDate?D(3,7,t.parsedDate,"yyyy-MM-dd HH:mm"):"\u2014")),o(3),m(t.titulo||"Sem t\xEDtulo"),o(),d("title",S(t.descricao||"")),o(),m(t.descricao||"Sem descri\xE7\xE3o"),o(3),b("Opera\xE7\xE3o: ",t.operation_id||"\u2014"),o(2),d("ngIf",t.link||t.url)}}function Q(e,r){if(e&1&&(u(0),i(1,"div",26),p(2,K,13,10,"article",27),v(3,"slice"),n(),g()),e&2){let t=c(2);o(2),d("ngForOf",R(3,1,t.videos,0,20))}}function W(e,r){e&1&&(i(0,"div",25),a(1,"Nenhum v\xEDdeo encontrado."),n())}function X(e,r){if(e&1&&(u(0),i(1,"section",15)(2,"div",16)(3,"div",17),a(4,"Total de V\xEDdeos"),n(),i(5,"div",18),a(6),v(7,"number"),n()(),i(8,"div",16)(9,"div",17),a(10,"Opera\xE7\xF5es \xDAnicas"),n(),i(11,"div",18),a(12),v(13,"number"),n()(),i(14,"div",16)(15,"div",17),a(16,"Per\xEDodo"),n(),i(17,"div",18),a(18),n()(),i(19,"div",16)(20,"div",17),a(21,"Dataset"),n(),i(22,"div",19),a(23),n()()(),i(24,"section",20)(25,"div",21)(26,"h2",22),a(27,"V\xEDdeos por ano"),n(),p(28,q,2,2,"ng-container",23)(29,z,2,0,"ng-template",null,0,f),n(),i(31,"div",21)(32,"h2",22),a(33,"V\xEDdeos por dia"),n(),p(34,Z,2,2,"ng-container",23)(35,G,2,0,"ng-template",null,1,f),n()(),i(37,"section",4)(38,"h2",22),a(39,"Amostra de V\xEDdeos"),n(),p(40,Q,4,5,"ng-container",23)(41,W,2,0,"ng-template",null,2,f),n(),g()),e&2){let t=x(30),s=x(36),Y=x(42),l=c();o(6),m(h(7,10,l.meta==null?null:l.meta.totalVideos)),o(6),m(h(13,12,l.meta==null?null:l.meta.totalOperations)),o(6),m((l.meta==null?null:l.meta.period)||"\u2014"),o(5),m(l.meta==null?null:l.meta.id),o(5),d("ngIf",l.yearChart==null||l.yearChart.labels==null?null:l.yearChart.labels.length)("ngIfElse",t),o(6),d("ngIf",l.dayChart==null||l.dayChart.labels==null?null:l.dayChart.labels.length)("ngIfElse",s),o(6),d("ngIf",l.videos==null?null:l.videos.length)("ngIfElse",Y)}}var B=class e{route=_(A);real=_(P);isLoading=!0;timedOut=!1;error="";datasetId="";meta=null;videos=[];yearChart;yearOpts;dayChart;dayOpts;ngOnInit(){return y(this,null,function*(){this.datasetId=this.route.snapshot.paramMap.get("id")||"";let r=this.real.loadDataset(this.datasetId);try{let t=yield F(r,5e3);this.apply(t)}catch(t){t?.message==="TIMEOUT"?(this.timedOut=!0,this.isLoading=!1,r.then(s=>this.apply(s)).catch(()=>{this.error="N\xE3o foi poss\xEDvel carregar o dataset."})):(this.error="N\xE3o foi poss\xEDvel carregar o dataset.",this.isLoading=!1)}})}apply(r){this.meta=r.meta,this.videos=r.videos,this.yearChart={labels:r.series.byYear.labels,datasets:[{label:"V\xEDdeos por ano",data:r.series.byYear.values,borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,.12)",tension:.25,fill:!0}]},this.yearOpts={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}},this.dayChart={labels:r.series.byDay.labels,datasets:[{label:"V\xEDdeos por dia",data:r.series.byDay.values,borderColor:"#8b5cf6",backgroundColor:"rgba(139,92,246,.12)",tension:.25,fill:!0}]},this.dayOpts={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}},this.isLoading=!1,this.timedOut=!1,this.error=""}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=I({type:e,selectors:[["app-eventos-real"]],decls:11,vars:5,consts:[["noYear",""],["noDay",""],["noVideos",""],[1,"space-y-6"],[1,"bg-white","rounded-xl","border","border-slate-200","p-6"],[1,"text-2xl","font-bold","text-slate-900"],["class","text-slate-600 text-base ml-2",4,"ngIf"],[1,"text-slate-600","mt-1"],["class","bg-white rounded-xl border border-slate-200 p-6",4,"ngIf"],["class","bg-white rounded-xl border border-slate-200 p-6 text-red-600",4,"ngIf"],["class","bg-amber-50 border border-amber-200 text-amber-700 rounded-md p-3",4,"ngIf"],[4,"ngIf"],[1,"text-slate-600","text-base","ml-2"],[1,"bg-white","rounded-xl","border","border-slate-200","p-6","text-red-600"],[1,"bg-amber-50","border","border-amber-200","text-amber-700","rounded-md","p-3"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","border","border-slate-200","rounded-xl","p-4"],[1,"text-slate-500","text-sm"],[1,"text-2xl","font-bold"],[1,"text-slate-800","font-medium","text-sm","break-all"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","rounded-xl","border","border-slate-200","p-6","h-96"],[1,"font-semibold","text-slate-900","mb-3"],[4,"ngIf","ngIfElse"],["type","line","height","100%",3,"data","options"],[1,"text-slate-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","border border-slate-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"border","border-slate-200","rounded-lg","p-4"],[1,"text-sm","text-slate-500","mb-1"],[1,"font-medium","text-slate-800"],[1,"text-slate-500","text-sm","truncate",3,"title"],[1,"mt-2","text-sm"],[1,"px-2","py-0.5","rounded","bg-slate-100","text-slate-700"],[1,"mt-3"],["class","text-blue-600 hover:underline","target","_blank","rel","noopener",3,"href",4,"ngIf"],["target","_blank","rel","noopener",1,"text-blue-600","hover:underline",3,"href"]],template:function(t,s){t&1&&(i(0,"div",3)(1,"header",4)(2,"h1",5),a(3," Eventos \u2014 Cen\xE1rio real "),p(4,U,2,1,"span",6),n(),i(5,"p",7),a(6,"Dados de eventos detectados pela heur\xEDstica no dataset selecionado."),n()(),p(7,j,2,0,"div",8)(8,H,2,1,"div",9)(9,$,2,0,"div",10)(10,X,43,14,"ng-container",11),n()),t&2&&(o(4),d("ngIf",s.meta==null?null:s.meta.label),o(3),d("ngIf",s.isLoading),o(),d("ngIf",!s.isLoading&&s.error),o(),d("ngIf",s.timedOut&&!s.error),o(),d("ngIf",!s.isLoading&&!s.error))},dependencies:[k,O,T,N,L,M,V,w],encapsulation:2})};export{B as EventosRealComponent};

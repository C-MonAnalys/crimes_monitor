import{L as c}from"./chunk-OSVV57MB.js";import{f as o}from"./chunk-EQDQRRRY.js";var l=class n{base;constructor(){let t=document.getElementsByTagName("base")[0],e=t&&t.getAttribute("href")||"/",s=e.endsWith("/")?e:e+"/";this.base=`${s}assets/data/sentiment/cenario-real`}fetchJson(t){return o(this,null,function*(){let e=yield fetch(t);if(!e.ok)throw new Error(`HTTP ${e.status} @ ${t}`);return e.json()})}getDatasets(){return o(this,null,function*(){let t=`${this.base}/datasets.json`;return(yield this.fetchJson(t))??{}})}loadDataset(t){return o(this,null,function*(){let s=(yield this.getDatasets())[t];if(!s)throw new Error(`Dataset "${t}" n\xE3o encontrado.`);let a=this.resolve(`${s.commentsFile}`),m=this.resolve(`${s.bootstrapFile}`);console.log("commentsFile:",a);let[r,i]=yield Promise.all([this.fetchJson(a).catch(()=>[]),this.fetchJson(m).catch(()=>[])]);return{meta:{id:t,title:s.title,total:Array.isArray(r)?r.length:0},comments:Array.isArray(r)?r:[],bootstrap:Array.isArray(i)?i:[]}})}resolve(t){let e=document.getElementsByTagName("base")[0],s=e&&e.getAttribute("href")||"/",a=s.endsWith("/")?s:s+"/";return console.log("[SentimentRealService] resolve()",{input:t,baseHref:a}),/^https?:\/\//i.test(t)?t:t.startsWith("assets/")?`${a}${t}`:t.startsWith("data/")?`${a}assets/data/sentiment/cenario-real/${t.replace(/^data\//,"")}`:t.startsWith("sentiment/")?`${a}assets/data/${t}`:`${this.base}/${t}`}static \u0275fac=function(e){return new(e||n)};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};export{l as a};

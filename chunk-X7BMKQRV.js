import{a as M}from"./chunk-C47FRUXC.js";import{a as F}from"./chunk-TODVTVVE.js";import{l as T,m as A}from"./chunk-Z2TUEXGM.js";import{j as D}from"./chunk-IYZEOZ4X.js";import{j as C,o as S}from"./chunk-TL75RN7M.js";import{Fa as x,Ka as f,Xa as p,Ya as a,Za as i,_a as l,ib as E,rb as y,sb as n,tb as m,ua as o,ub as v,za as b}from"./chunk-OSVV57MB.js";import{f as g}from"./chunk-EQDQRRRY.js";function B(h,t){if(h&1&&(a(0,"tr",35)(1,"td",36),n(2),i(),a(3,"td",37)(4,"span",38),n(5),i()(),a(6,"td",39),n(7),i(),a(8,"td",39),n(9),i(),a(10,"td",39),n(11),i(),a(12,"td",39),n(13),i(),a(14,"td",39),n(15),i(),a(16,"td",39),n(17),i()()),h&2){let e=t.$implicit,r=E();o(2),m(e.cenario),o(2),y(r.getTechniqueClass(e.tecnica)),o(),v(" ",r.getTechniqueName(e.tecnica)," "),o(2),m(r.formatMetric(e.acu)),o(2),m(r.formatMetric(e.pre)),o(2),m(r.formatMetric(e.rev)),o(2),m(r.formatMetric(e.f1)),o(2),m(r.formatMetric(e.nmi)),o(2),m(r.formatMetric(e.ami))}}var w=class h{constructor(t){this.eventsService=t}metrics=[];videos=[];videosByMonth=[];totalVideos=0;datasets=[];techniques=[];bestAccuracy=0;periodRange="";accuracyChartData={};f1ChartData={};temporalChartData={};radarChartData={};chartOptions={};lineChartOptions={};temporalChartOptions={};radarChartOptions={};ngOnInit(){return g(this,null,function*(){yield this.loadData(),this.calculateMetrics(),this.prepareCharts()})}loadData(){return g(this,null,function*(){try{let t=yield this.eventsService.listAll();this.metrics=t.metrics,this.videos=t.videos,this.videosByMonth=t.videosByMonth}catch(t){console.error("Erro ao carregar dados:",t)}})}calculateMetrics(){this.totalVideos=this.videos.length,this.datasets=[...new Set(this.metrics.map(e=>e.dataset))],this.techniques=[...new Set(this.metrics.map(e=>e.tecnica))];let t=Math.max(...this.metrics.map(e=>e.acu||0));this.bestAccuracy=Math.round(t*100),this.calculatePeriodRange()}calculatePeriodRange(){if(this.videos.length===0){this.periodRange="N/A";return}let t=this.videos.map(d=>d.parsedDate).filter(d=>d).sort((d,u)=>d.getTime()-u.getTime());if(t.length===0){this.periodRange="N/A";return}let e=t[0],r=t[t.length-1],s=e.getFullYear(),c=r.getFullYear();if(s===c)this.periodRange=`${s}`;else{let d=c-s+1;this.periodRange=`${s}-${c} (${d} anos)`}}prepareCharts(){this.prepareAccuracyChart(),this.prepareF1Chart(),this.prepareTemporalChart(),this.prepareRadarChart(),this.setupChartOptions()}prepareAccuracyChart(){let t=this.techniques.map(e=>{let r=this.metrics.filter(c=>c.tecnica===e),s=r.reduce((c,d)=>c+(d.acu||0),0)/r.length;return{technique:e,accuracy:s*100}});this.accuracyChartData={labels:t.map(e=>this.getTechniqueName(e.technique)),datasets:[{label:"Acur\xE1cia M\xE9dia (%)",data:t.map(e=>e.accuracy.toFixed(1)),backgroundColor:["#3B82F6","#10B981","#F59E0B"],borderColor:["#2563EB","#059669","#D97706"],borderWidth:1}]}}prepareF1Chart(){let t=this.datasets.map(e=>{let r=this.metrics.filter(s=>s.dataset===e);return{label:this.getDatasetName(e),data:this.techniques.map(s=>{let c=r.find(d=>d.tecnica===s);return c?(c.f1*100).toFixed(1):0}),borderColor:this.getDatasetColor(e),backgroundColor:this.getDatasetColor(e)+"20",tension:.4}});this.f1ChartData={labels:this.techniques.map(e=>this.getTechniqueName(e)),datasets:t}}prepareTemporalChart(){let t=this.videosByMonth.map(e=>({month:e.period,count:e.count}));this.temporalChartData={labels:t.map(e=>{let[r,s]=e.month.split("-");return`${s}/${r}`}),datasets:[{label:"V\xEDdeos Coletados",data:t.map(e=>e.count),borderColor:"#8B5CF6",backgroundColor:"#8B5CF620",tension:.4,fill:!0}]}}prepareRadarChart(){let t=["acu","pre","rev","f1","nmi","ami"],e=["Acur\xE1cia","Precis\xE3o","Revoca\xE7\xE3o","F1-Score","NMI","AMI"],r=this.techniques.map(s=>{let c=this.metrics.filter(u=>u.tecnica===s),d=t.map(u=>(c.reduce((I,R)=>I+(R[u]||0),0)/c.length*100).toFixed(1));return{label:this.getTechniqueName(s),data:d,borderColor:this.getTechniqueColor(s),backgroundColor:this.getTechniqueColor(s)+"20",pointBackgroundColor:this.getTechniqueColor(s),pointBorderColor:this.getTechniqueColor(s)}});this.radarChartData={labels:e,datasets:r}}setupChartOptions(){this.chartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0,max:100}}},this.lineChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0,max:100}}},this.temporalChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}},this.radarChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{r:{beginAtZero:!0,max:100}}}}formatNumber(t){return t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}formatMetric(t){return(t*100).toFixed(1)+"%"}getTechniqueName(t){return{HS:"Heur\xEDstica Sem\xE2ntica",HT:"Heur\xEDstica Temporal",GPT:"GPT-4"}[t]||t}getTechniqueClass(t){return{HS:"bg-blue-100 text-blue-800",HT:"bg-green-100 text-green-800",GPT:"bg-yellow-100 text-yellow-800"}[t]||"bg-gray-100 text-gray-800"}getTechniqueColor(t){return{HS:"#3B82F6",HT:"#10B981",GPT:"#F59E0B"}[t]||"#6B7280"}getDatasetName(t){return{todos_com:"Todos (com transcri\xE7\xE3o)",todos_sem:"Todos (sem transcri\xE7\xE3o)",esparsos_com:"Esparsos (com transcri\xE7\xE3o)",esparsos_sem:"Esparsos (sem transcri\xE7\xE3o)",repercussao_com:"Alta repercuss\xE3o (com transcri\xE7\xE3o)",repercussao_sem:"Alta repercuss\xE3o (sem transcri\xE7\xE3o)"}[t]||t}getDatasetColor(t){return{todos_com:"#3B82F6",todos_sem:"#6366F1",esparsos_com:"#10B981",esparsos_sem:"#059669",repercussao_com:"#F59E0B",repercussao_sem:"#D97706"}[t]||"#6B7280"}static \u0275fac=function(e){return new(e||h)(b(F))};static \u0275cmp=x({type:h,selectors:[["app-events-analysis"]],decls:92,vars:13,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-slate-900"],[1,"text-slate-600","mt-2"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6"],[1,"bg-white","rounded-lg","shadow-sm","border","border-slate-200","p-6"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-calendar-event","text-blue-600"],[1,"text-2xl","font-bold","text-slate-900"],[1,"text-sm","text-slate-600"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-calendar-range","text-green-600"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-robot","text-yellow-600"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-trophy","text-orange-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"text-lg","font-semibold","text-slate-900","mb-4"],[1,"bi","bi-bar-chart","mr-2","text-blue-600"],["type","bar",1,"w-full","h-64",3,"data","options"],[1,"bi","bi-graph-up","text-green-600","mr-2"],["type","line",1,"w-full","h-64",3,"data","options"],[1,"bi","bi-calendar-week","text-purple-600","mr-2"],[1,"bi","bi-radar","text-orange-600","mr-2"],["type","radar",1,"w-full","h-64",3,"data","options"],[1,"bi","bi-table","text-indigo-600","mr-2"],[1,"overflow-x-auto"],[1,"w-full","text-sm"],[1,"border-b","border-slate-200"],[1,"text-left"],[1,"pb-3","font-medium","text-slate-900"],[1,"pb-3","font-medium","text-slate-900","text-center"],[1,"divide-y","divide-slate-100"],["class","hover:bg-slate-50",4,"ngFor","ngForOf"],[1,"hover:bg-slate-50"],[1,"py-3","text-slate-900"],[1,"py-3"],[1,"inline-flex","px-2","py-1","text-xs","rounded","font-medium"],[1,"py-3","text-center","font-mono"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),n(4,"An\xE1lise de Eventos"),i(),a(5,"p",3),n(6,"An\xE1lises estat\xEDsticas e insights dos datasets de eventos"),i()()(),a(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),l(11,"i",8),i(),a(12,"div")(13,"div",9),n(14),i(),a(15,"div",10),n(16,"Total de V\xEDdeos"),i()()()(),a(17,"div",5)(18,"div",6)(19,"div",11),l(20,"i",12),i(),a(21,"div")(22,"div",9),n(23),i(),a(24,"div",10),n(25,"Per\xEDodo de Coleta"),i()()()(),a(26,"div",5)(27,"div",6)(28,"div",13),l(29,"i",14),i(),a(30,"div")(31,"div",9),n(32),i(),a(33,"div",10),n(34,"T\xE9cnicas Testadas"),i()()()(),a(35,"div",5)(36,"div",6)(37,"div",15),l(38,"i",16),i(),a(39,"div")(40,"div",9),n(41),i(),a(42,"div",10),n(43,"Melhor Acur\xE1cia"),i()()()()(),a(44,"div",17)(45,"div",5)(46,"h3",18),l(47,"i",19),n(48," Acur\xE1cia por T\xE9cnica "),i(),l(49,"p-chart",20),i(),a(50,"div",5)(51,"h3",18),l(52,"i",21),n(53," F1-Score por Dataset "),i(),l(54,"p-chart",22),i(),a(55,"div",5)(56,"h3",18),l(57,"i",23),n(58," V\xEDdeos por Per\xEDodo "),i(),l(59,"p-chart",22),i(),a(60,"div",5)(61,"h3",18),l(62,"i",24),n(63," Compara\xE7\xE3o de M\xE9tricas "),i(),l(64,"p-chart",25),i()(),a(65,"div",5)(66,"h3",18),l(67,"i",26),n(68," M\xE9tricas Detalhadas por Cen\xE1rio "),i(),a(69,"div",27)(70,"table",28)(71,"thead",29)(72,"tr",30)(73,"th",31),n(74,"Cen\xE1rio"),i(),a(75,"th",31),n(76,"T\xE9cnica"),i(),a(77,"th",32),n(78,"Acur\xE1cia"),i(),a(79,"th",32),n(80,"Precis\xE3o"),i(),a(81,"th",32),n(82,"Revoca\xE7\xE3o"),i(),a(83,"th",32),n(84,"F1-Score"),i(),a(85,"th",32),n(86,"NMI"),i(),a(87,"th",32),n(88,"AMI"),i()()(),a(89,"tbody",33),f(90,B,18,10,"tr",34),i()()()()(),l(91,"app-footer")),e&2&&(o(14),m(r.formatNumber(r.totalVideos)),o(9),m(r.periodRange),o(9),m(r.techniques.length),o(9),v("",r.bestAccuracy,"%"),o(8),p("data",r.accuracyChartData)("options",r.chartOptions),o(5),p("data",r.f1ChartData)("options",r.lineChartOptions),o(5),p("data",r.temporalChartData)("options",r.temporalChartOptions),o(5),p("data",r.radarChartData)("options",r.radarChartOptions),o(26),p("ngForOf",r.metrics))},dependencies:[S,C,D,A,T,M],encapsulation:2})};export{w as a};

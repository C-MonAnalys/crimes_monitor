import{a as w}from"./chunk-RQTTKIPS.js";import{a as F}from"./chunk-IDKJL3SA.js";import{m as N}from"./chunk-SURMKUDF.js";import{g as T,j as A}from"./chunk-CNJEVGNS.js";import{k as I,m as L,o as D}from"./chunk-25R6QSTX.js";import{Cb as x,Gb as f,Hb as _,Ib as k,Ja as O,Kb as P,Pa as b,Q as S,Wa as p,Xa as t,Ya as e,Za as d,ba as c,bb as M,cb as y,hb as u,mb as C,rb as n,sb as g,ta as l,tb as v}from"./chunk-OAMJKMOZ.js";import{f as E}from"./chunk-EQDQRRRY.js";var B=r=>["/eventos",r],R=r=>["/posicionamento",r];function V(r,s){if(r&1&&(t(0,"a",15),n(1,"Abrir \xFAltimo dataset de Eventos"),e()),r&2){let i=u(2);p("routerLink",x(1,B,i.latestEvent().id))}}function q(r,s){if(r&1&&(t(0,"a",16),n(1,"Abrir \xFAltimo dataset de Posicionamento"),e()),r&2){let i=u(2);p("routerLink",x(1,R,i.latestSent().id))}}function z(r,s){if(r&1&&(t(0,"div",12),b(1,V,2,3,"a",13)(2,q,2,3,"a",14),e()),r&2){let i=u();l(),p("ngIf",i.latestEvent()),l(),p("ngIf",i.latestSent())}}function j(r,s){r&1&&(t(0,"div",17),n(1,"Carregando\u2026"),e())}function J(r,s){if(r&1&&(t(0,"div",18),n(1),e()),r&2){let i=u();l(),g(i.error())}}function Y(r,s){if(r&1&&(t(0,"p",53),n(1),e()),r&2){let i,a=u(3);l(),g((i=a.latestEvent())==null?null:i.description)}}function U(r,s){if(r&1&&(t(0,"div",17)(1,"div",46)(2,"div")(3,"h3",47),n(4,"\xDAltimo \u2014 Cen\xE1rio Real (Eventos)"),e(),t(5,"div",48),n(6),e(),b(7,Y,2,1,"p",49),e(),d(8,"i",50),e(),t(9,"div",51)(10,"a",52),n(11,"Abrir dataset \u2192"),e()()()),r&2){let i,a,o,m=u(2);l(6),g((i=m.latestEvent())==null?null:i.label),l(),p("ngIf",(a=m.latestEvent())==null?null:a.description),l(3),p("routerLink",x(3,B,(o=m.latestEvent())==null?null:o.id))}}function W(r,s){r&1&&(t(0,"div",17)(1,"h3",47),n(2,"\xDAltimo \u2014 Cen\xE1rio Real (Eventos)"),e(),t(3,"p",43),n(4,"Nenhum dataset encontrado."),e()())}function Z(r,s){if(r&1&&(t(0,"div",17)(1,"div",46)(2,"div")(3,"h3",47),n(4,"\xDAltimo \u2014 Cen\xE1rio Real (Posicionamento)"),e(),t(5,"div",48),n(6),e()(),d(7,"i",54),e(),t(8,"div",51)(9,"a",52),n(10,"Abrir dataset \u2192"),e()()()),r&2){let i,a,o=u(2);l(6),g((i=o.latestSent())==null?null:i.label),l(3),p("routerLink",x(2,R,(a=o.latestSent())==null?null:a.id))}}function G(r,s){r&1&&(t(0,"div",17)(1,"h3",47),n(2,"\xDAltimo \u2014 Cen\xE1rio Real (Posicionamento)"),e(),t(3,"p",43),n(4,"Nenhum dataset encontrado."),e()())}function K(r,s){if(r&1&&(M(0),t(1,"section",19)(2,"div",20)(3,"div",21),n(4,"V\xEDdeos coletados"),e(),t(5,"div",22),n(6),f(7,"number"),e(),t(8,"div",23),n(9),e()(),t(10,"div",20)(11,"div",21),n(12,"Opera\xE7\xF5es \xFAnicas"),e(),t(13,"div",22),n(14),f(15,"number"),e(),t(16,"div",23),n(17),f(18,"number"),e()(),t(19,"div",20)(20,"div",21),n(21,"Coment\xE1rios rotulados"),e(),t(22,"div",22),n(23),f(24,"number"),e(),t(25,"div",23),n(26,"Base de treino do modelo"),e()(),t(27,"div",20)(28,"div",21),n(29,"Distribui\xE7\xE3o de r\xF3tulos"),e(),t(30,"div",24)(31,"div"),d(32,"span",25),n(33," Desaprova: "),t(34,"b"),n(35),e()(),t(36,"div"),d(37,"span",26),n(38," Neutro: "),t(39,"b"),n(40),e()(),t(41,"div"),d(42,"span",27),n(43," Aprova: "),t(44,"b"),n(45),e()()()()(),t(46,"section",28)(47,"a",29)(48,"div",30),d(49,"i",31),e(),t(50,"div",32)(51,"h3"),n(52,"Avalia\xE7\xF5es \u2014 Eventos"),e(),t(53,"p"),n(54,"M\xE9tricas e s\xE9ries dos datasets (heur\xEDsticas)."),e()(),d(55,"i",33),e(),t(56,"a",34)(57,"div",30),d(58,"i",35),e(),t(59,"div",32)(60,"h3"),n(61,"Avalia\xE7\xF5es \u2014 Posicionamento"),e(),t(62,"p"),n(63,"Bootstrap e m\xE9tricas do modelo BERT."),e()(),d(64,"i",33),e(),t(65,"a",36)(66,"div",30),d(67,"i",37),e(),t(68,"div",32)(69,"h3"),n(70,"Cen\xE1rio Real \u2014 Eventos"),e(),t(71,"p"),n(72,"Heur\xEDstica aplicada em contexto real."),e()(),d(73,"i",33),e(),t(74,"a",38)(75,"div",30),d(76,"i",39),e(),t(77,"div",32)(78,"h3"),n(79,"Cen\xE1rio Real \u2014 Posicionamento"),e(),t(80,"p"),n(81,"Distribui\xE7\xE3o por classe e amostras."),e()(),d(82,"i",33),e()(),t(83,"section",40),b(84,U,12,5,"div",41)(85,W,5,0,"ng-template",null,0,P)(87,Z,11,4,"div",41)(88,G,5,0,"ng-template",null,1,P),e(),t(90,"section",42)(91,"div",17)(92,"h3"),n(93,"Como ler as m\xE9tricas"),e(),t(94,"p",43),n(95," As m\xE9tricas incluem intervalos de confian\xE7a (IC 95%). Na p\xE1gina Avalia\xE7\xF5es voc\xEA pode comparar modelos e ver a incerteza por classe. "),e(),t(96,"a",44),n(97,"Abrir Avalia\xE7\xF5es de Posicionamento \u2192"),e()(),t(98,"div",17)(99,"h3"),n(100,"Sobre os datasets de eventos"),e(),t(101,"p",43),n(102," Os eventos s\xE3o detectados por heur\xEDsticas e agregados por opera\xE7\xE3o. Explore a evolu\xE7\xE3o por m\xEAs/ano e detalhes por opera\xE7\xE3o. "),e(),t(103,"a",45),n(104,"Abrir Avalia\xE7\xF5es de Eventos \u2192"),e()()(),y()),r&2){let i=C(86),a=C(89),o=u();l(6),g(_(7,12,o.totalVideos())),l(3),v("Per\xEDodo: ",o.videosPeriodLabel()),l(5),g(_(15,14,o.uniqOperations())),l(3),v("M\xE9dia v\xEDdeos/op: ",k(18,16,o.avgPerOp(),"1.0-1")),l(6),g(_(24,19,o.trainTotal())),l(12),v("",o.pct(o.treinoNeg()),"%"),l(5),v("",o.pct(o.treinoNeu()),"%"),l(5),v("",o.pct(o.treinoPos()),"%"),l(39),p("ngIf",o.latestEvent())("ngIfElse",i),l(3),p("ngIf",o.latestSent())("ngIfElse",a)}}var H=class r{eventsSvc=S(w);sentiSvc=S(F);isLoading=c(!0);timedOut=c(!1);error=c("");totalVideos=c(0);uniqOperations=c(0);videosPeriodLabel=c("\u2014");avgPerOp=c(0);trainTotal=c(0);trainNeg=c(0);trainNeu=c(0);trainPos=c(0);latestEvent=c(null);latestSent=c(null);videosSparkData;videosSparkOpts;timeout(s,i){return new Promise((a,o)=>{let m=setTimeout(()=>o(new Error("TIMEOUT")),i);s.then(h=>{clearTimeout(m),a(h)}).catch(h=>{clearTimeout(m),o(h)})})}pct(s){let i=this.trainTotal();return i?Math.round(s/i*100):0}treinoNeg(){return this.trainNeg()}treinoNeu(){return this.trainNeu()}treinoPos(){return this.trainPos()}fetchJson(s){return E(this,null,function*(){try{let i=document.getElementsByTagName("base")[0],a=i&&i.getAttribute("href")||"/",o=a.endsWith("/")?a:a+"/",m=yield fetch(o+s);return m.ok?yield m.json():null}catch{return null}})}loadLatestDatasets(){return E(this,null,function*(){let s=yield this.fetchJson("assets/data/events/cenario-real/datasets.json");if(s&&typeof s=="object")if(s.brasil_all){let a=s.brasil_all;this.latestEvent.set({id:"brasil_all",label:a?.label??"Brasil 2019\u20132025",description:a?.description??""})}else{let a=Object.entries(s);if(a.length){let[o,m]=a[a.length-1];this.latestEvent.set({id:o,label:m?.label??o,description:m?.description??""})}}let i=yield this.fetchJson("assets/data/sentiment/cenario-real/datasets.json");if(i&&typeof i=="object"){let a=Object.entries(i);if(a.length){let[o,m]=a[a.length-1];this.latestSent.set({id:o,label:m?.title??o,description:""})}}})}buildSparklines(s){let i=s.map(o=>o.period),a=s.map(o=>o.count);this.videosSparkData={labels:i,datasets:[{data:a,tension:.35,fill:!0,borderColor:"#6366f1",backgroundColor:"rgba(99,102,241,0.12)",borderWidth:1.5,pointRadius:0}]},this.videosSparkOpts={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{display:!1},y:{display:!1,beginAtZero:!0}},elements:{line:{borderJoinStyle:"round"}}}}ngOnInit(){return E(this,null,function*(){try{let s=Promise.all([this.eventsSvc.getEvaluationsOverview(),this.sentiSvc.getTrainingStats(),this.eventsSvc.getVideosByMonth()]),[i,a,o]=yield this.timeout(s,5e3);i?.datasets&&(this.totalVideos.set(i.datasets.totalVideos??0),this.uniqOperations.set(i.datasets.uniqueOperations??0),this.videosPeriodLabel.set(i.datasets.periodLabel??"\u2014"),this.avgPerOp.set(i.datasets.avgVideosPerOperation??0)),a&&(this.trainTotal.set(a.total??0),this.trainNeg.set(a.labels?.["-1"]??0),this.trainNeu.set(a.labels?.["0"]??0),this.trainPos.set(a.labels?.["1"]??0)),this.buildSparklines(Array.isArray(o)?o:[]),this.loadLatestDatasets(),this.isLoading.set(!1)}catch(s){s?.message==="TIMEOUT"?(this.timedOut.set(!0),this.isLoading.set(!1),this.error.set("")):(this.error.set("N\xE3o foi poss\xEDvel carregar os destaques."),this.isLoading.set(!1))}})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=O({type:r,selectors:[["app-home"]],decls:30,vars:4,consts:[["noLastEvent",""],["noLastSent",""],[1,"space-y-6"],[1,"hero"],[1,"hero-points"],[1,"bi","bi-clipboard-data"],[1,"bi","bi-broadcast"],[1,"bi","bi-database"],["class","actions",4,"ngIf"],["class","card",4,"ngIf"],["class","card error",4,"ngIf"],[4,"ngIf"],[1,"actions"],["class","btn primary",3,"routerLink",4,"ngIf"],["class","btn ghost",3,"routerLink",4,"ngIf"],[1,"btn","primary",3,"routerLink"],[1,"btn","ghost",3,"routerLink"],[1,"card"],[1,"card","error"],[1,"grid","grid-4"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"stat-hint"],[1,"mt-1","text-sm","text-slate-700","space-y-1"],[1,"inline-block","w-2","h-2","rounded-sm","mr-2",2,"background","#ef4444"],[1,"inline-block","w-2","h-2","rounded-sm","mr-2",2,"background","#6b7280"],[1,"inline-block","w-2","h-2","rounded-sm","mr-2",2,"background","#10b981"],[1,"tiles-grid"],["routerLink","/avaliacoes/eventos",1,"tile"],[1,"tile-icon"],[1,"bi","bi-bar-chart"],[1,"tile-body"],[1,"bi","bi-arrow-right"],["routerLink","/avaliacoes/posicionamento",1,"tile"],[1,"bi","bi-chat-left-quote"],["routerLink","/eventos/brasil_all",1,"tile"],[1,"bi","bi-collection-play"],["routerLink","/posicionamento",1,"tile"],[1,"bi","bi-chat-square-text"],[1,"grid","grid-2"],["class","card",4,"ngIf","ngIfElse"],[1,"grid-2"],[1,"muted"],["routerLink","/avaliacoes/posicionamento",1,"btn","link"],["routerLink","/avaliacoes/eventos",1,"btn","link"],[1,"flex","items-start","justify-between"],[1,"mb-1"],[1,"text-slate-600","text-sm"],["class","muted mt-2",4,"ngIf"],[1,"bi","bi-collection-play","text-xl","text-slate-400"],[1,"mt-4"],[1,"btn","link",3,"routerLink"],[1,"muted","mt-2"],[1,"bi","bi-chat-square-text","text-xl","text-slate-400"]],template:function(i,a){i&1&&(t(0,"div",2)(1,"section",3)(2,"div")(3,"h1"),n(4,"Crimes Stance"),e(),t(5,"p"),n(6," Plataforma para "),t(7,"b"),n(8,"monitorar opera\xE7\xF5es policiais"),e(),n(9," em v\xEDdeos e "),t(10,"b"),n(11,"analisar o posicionamento da audi\xEAncia"),e(),n(12,". Aqui voc\xEA encontra: "),e(),t(13,"ul",4)(14,"li"),d(15,"i",5),n(16," Avalia\xE7\xF5es de desempenho de heur\xEDsticas e do modelo de opini\xE3o"),e(),t(17,"li"),d(18,"i",6),n(19," Aplica\xE7\xF5es em "),t(20,"b"),n(21,"cen\xE1rios reais"),e(),n(22," com datasets prontos para explora\xE7\xE3o"),e(),t(23,"li"),d(24,"i",7),n(25," S\xE9ries, m\xE9tricas e amostras para entender o contexto por opera\xE7\xE3o"),e()(),b(26,z,3,2,"div",8),e()(),b(27,j,2,0,"div",9)(28,J,2,1,"div",10)(29,K,105,21,"ng-container",11),e()),i&2&&(l(26),p("ngIf",a.latestEvent()||a.latestSent()),l(),p("ngIf",a.isLoading()),l(),p("ngIf",!a.isLoading()&&a.error()),l(),p("ngIf",!a.isLoading()&&!a.error()))},dependencies:[D,I,A,T,N,L],styles:[".grid[_ngcontent-%COMP%]{display:grid;gap:16px}.grid-2[_ngcontent-%COMP%], .grid-4[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width: 768px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}.tiles-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:14px;margin-top:6px}@media (min-width: 860px){.tiles-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1180px){.tiles-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}.hero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f172a,#1e293b 60%,#111827);border-radius:16px;padding:28px;color:#e5e7eb;border:1px solid rgba(255,255,255,.06);box-shadow:0 10px 24px #02061759;display:block}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px;font-weight:800;letter-spacing:.2px;margin:0 0 8px;color:#f8fafc}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:#e2e8f0}.hero[_ngcontent-%COMP%]   .hero-points[_ngcontent-%COMP%]{margin:12px 0 0;padding:0;list-style:none}.hero[_ngcontent-%COMP%]   .hero-points[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:8px 0;color:#d1d5db;line-height:1.25}.hero[_ngcontent-%COMP%]   .hero-points[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#93c5fd}.actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px 14px;border-radius:12px;text-decoration:none;display:inline-flex;align-items:center;gap:8px;transition:background-color .15s ease,border-color .15s ease,box-shadow .15s ease,transform .05s ease;outline:none;border:1px solid transparent}.btn[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 3px #6366f180}.btn.primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border-color:#2563eb}.btn.primary[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.btn.ghost[_ngcontent-%COMP%]{background:transparent;border-color:#ffffff47;color:#e5e7eb}.btn.ghost[_ngcontent-%COMP%]:hover{background:#ffffff0f;transform:translateY(-1px)}.btn.link[_ngcontent-%COMP%]{padding:0;border:none;color:#60a5fa;background:transparent}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:16px}.card.error[_ngcontent-%COMP%]{color:#b91c1c;border-color:#fecaca;background:#fef2f2}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:16px;font-weight:700;color:#0f172a}.card[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{color:#64748b;margin:0}.stat[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:16px}.stat-label[_ngcontent-%COMP%]{color:#64748b;font-size:12px}.stat-value[_ngcontent-%COMP%]{font-size:22px;font-weight:800;color:#0f172a;margin-top:2px}.stat-value.small[_ngcontent-%COMP%]{font-size:18px}.stat-hint[_ngcontent-%COMP%]{color:#94a3b8;font-size:12px;margin-top:4px}.tile[_ngcontent-%COMP%]{display:grid;grid-template-columns:40px 1fr auto;align-items:center;gap:12px;background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:14px 16px;text-decoration:none;color:inherit;transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease}.tile[_ngcontent-%COMP%]:hover{transform:translateY(-1px);border-color:#c7d2fe;box-shadow:0 8px 20px #6366f11a}.tile-icon[_ngcontent-%COMP%]{display:grid;place-items:center;width:40px;height:40px;border-radius:12px;background:#eef2ff;color:#6366f1;font-size:18px}.tile-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 2px;font-size:15px;font-weight:600;color:#0f172a}.tile-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#475569}.tile[_ngcontent-%COMP%] > .bi[_ngcontent-%COMP%]{font-size:16px;color:#94a3b8}"]})};export{H as HomeComponent};
